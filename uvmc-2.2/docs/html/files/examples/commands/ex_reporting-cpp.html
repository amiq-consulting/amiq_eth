<html><head><title>UVMC Command API Example - Reporting</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 01-12-2008 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org --> 








 <!--TOP - START OF CONTENT-->
<div id=Content>


 <!--CONTENT index=0 -->
<div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle></h1><div class=CBody><p>This code provides an example of issuing UVM reports and setting report verbosity from SC.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>uvmc_report</td><td class=CDLDescription>Send a report to UVM for processing</td></tr><tr><td class=CDLEntry>uvmc_set_report_verbosity</td><td class=CDLDescription>Set the verbosity level of messages coming from the given context(s).</td></tr><tr><td class=CDLEntry>uvmc_report_enabled</td><td class=CDLDescription>Return true if a report of the given severity, verbosity, and ID would be issued.&nbsp; Return 0 if it would be filtered.</td></tr><tr><td class=CDLEntry>UVMC_INFO</td><td class=CDLDescription>Send an info report to UVM for processing if <i>uvmc_report_enabled</i> returns true.&nbsp; File and line number are provided in the call to <i>uvmc_report</i>.</td></tr><tr><td class=CDLEntry>UVMC_WARNING</td><td class=CDLDescription>Send a warning report to UVM for processing if <i>uvmc_report_enabled</i> returns true.&nbsp; File and line number are provided in the call to <i>uvmc_report</i>.</td></tr><tr><td class=CDLEntry>UVMC_ERROR</td><td class=CDLDescription>Send an error report to UVM for processing if <i>uvmc_report_enabled</i> returns true.&nbsp; File and line number are provided in the call to <i>uvmc_report</i>.</td></tr><tr><td class=CDLEntry>UVMC_FATAL</td><td class=CDLDescription>Send a fatal report to UVM for processing if <i>uvmc_report_enabled</i> returns true.&nbsp; File and line number are provided in the call to <i>uvmc_report</i>.</td></tr></table><p>The UVM reporting API provides a means of issuing reports from SC that are filtered and formatted by the standard UVM reporting mechanism in SV.&nbsp; Reports from SC are subject to the same filtering and report catching semantics as native UVM reports.</p><p>Reports issued from SC via <a href="../../src/connect/sc/uvmc_commands-h.html#uvmc_report" class=LMethod id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">uvmc_report</a> use the global <i>uvm_top</i> as context, but the provided <i>context</i> is displayed to screen.&nbsp; To have the actual SC <i>context</i> participate in finer-grained report filtering, use the report catching mechanism.</p><p>When setting report verbosity from SC, the <i>context</i> argument refers to SV context.&nbsp; Use a context of &ldquo;&rdquo; when setting verbosity level for reports issued from SC via <a href="../../src/connect/sc/uvmc_commands-h.html#uvmc_report" class=LMethod id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">uvmc_report</a>.</p></div></div></div>




 <!--CONTENT index=1 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="top" href="../../../uvmc/examples/commands/ex_reporting.cpp">top</a></h2>

<!--START_ND_SUMMARY index=1-->
<div class=Summary><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=1 -->

<tr class="SClass"><td colspan=2 class=SEntry><a name="topSummary"  href="#top">top</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>Our top-level SC module does the following</td></tr>
  <!-- index=2 -->

<tr class="SMethod SIndent1 SMarked"><td class=SEntry><a name="top.show_uvm_factorySummary"  href="#top.show_uvm_factory">show_uvm_factory</a></td><td class=SDescription>This function sets UVM&rsquo;s report verbosity to various levels and issues several reports to demonstrate the effect.</td></tr>
  <!-- index=3 -->

<tr class="SGroup SIndent1"><td class=SEntry><a name="top.sc_mainSummary"  href="#top.sc_main">sc_main</a></td><td class=SDescription>Creates an instance of our <a href="#top" class=LClass id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">top</a> module then calls <i>sc_start</i> to start SC simulation.</td></tr></table></div></div><!--END_ND_SUMMARY-->
<div class=CBody><p>Our top-level SC module does the following</p><ul><li>Creates an instance of a generic <a href="../converters/consumer-cpp.html#consumer" class=LClass >consumer</a>.&nbsp; The consumer merely prints the transactions it receives side and sends them out its analysis port.</li><li>Spawn a thread function, <i>show_uvm_reporting</i></li><li>Register the consumer&rsquo;s ports for UVMC connection.</li></ul><blockquote><pre>#include &quot;systemc.h&quot;
#include &quot;tlm.h&quot;
#include &lt;string&gt;
#include &lt;iostream&gt;

using namespace std;
using namespace sc_core;
using namespace tlm;

#include &quot;uvmc.h&quot;
#include &quot;uvmc_macros.h&quot;
using namespace uvmc;


#include &quot;consumer.cpp&quot;

SC_MODULE(top)
{
  consumer cons;

  SC_CTOR(top) : cons(&quot;consumer&quot;) {
    SC_THREAD(show_uvm_reporting);
    uvmc_connect(cons.in,&quot;foo&quot;);
    uvmc_connect(cons.analysis_out,&quot;bar&quot;);
  }

  void show_uvm_reporting();

  private:
  void issue_reports();
};</pre></blockquote></div></div></div>




 <!--CONTENT index=2 -->
<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="top.show_uvm_factory" href="../../../uvmc/examples/commands/ex_reporting.cpp">show_uvm_factory</a></h3><div class=CBody><p>This function sets UVM&rsquo;s report verbosity to various levels and issues several reports to demonstrate the effect.</p></div></div></div>




 <!--CONTENT index=3 -->
<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="top.sc_main" href="../../../uvmc/examples/commands/ex_reporting.cpp">sc_main</a></h3><div class=CBody><p>Creates an instance of our <a href="#top" class=LClass id=link4 onMouseOver="ShowTip(event, 'tt2', 'link4')" onMouseOut="HideTip('tt2')">top</a> module then calls <i>sc_start</i> to start SC simulation.</p><blockquote><pre>int sc_main(int argc, char* argv[])
{
  top t(&quot;top&quot;);
  sc_start();
  return 0;
}</pre></blockquote>

<p align=center><a name="top.sc_main" href="../../../uvmc/examples/commands/ex_reporting.cpp">.../examples/commands/ex_reporting.cpp</a></p></div>
<div class="SourceCode"><pre>

void top::show_uvm_reporting()
{
  // wait for UVM to start run phase
  uvmc_wait_for_phase("run", UVM_PHASE_STARTED);

  cout &lt;&lt; endl &lt;&lt; "Verbosity = FULL" &lt;&lt; endl;
  uvmc_set_report_verbosity(UVM_FULL, "", 1);
  issue_reports();

  cout &lt;&lt; endl &lt;&lt; "Verbosity = HIGH" &lt;&lt; endl;
  uvmc_set_report_verbosity(UVM_HIGH, "", 1);
  issue_reports();

  cout &lt;&lt; endl &lt;&lt; "Verbosity = MEDIUM" &lt;&lt; endl;
  uvmc_set_report_verbosity(UVM_MEDIUM, "", 1);
  issue_reports();

  cout &lt;&lt; endl &lt;&lt; "Verbosity = LOW" &lt;&lt; endl;
  uvmc_set_report_verbosity(UVM_LOW, "", 1);
  issue_reports();

  cout &lt;&lt; endl &lt;&lt; "Verbosity = NONE" &lt;&lt; endl;
  uvmc_set_report_verbosity(UVM_NONE, "", 1);
  issue_reports();

  // back to the default
  uvmc_set_report_verbosity(UVM_MEDIUM, "", 1);
}

void top::issue_reports()
{
  UVMC_INFO("MY_INFO-NONE","Some none message", UVM_NONE,   name());
  UVMC_INFO("MY_INFO-LOW ","Some low  message", UVM_LOW,    name());
  UVMC_INFO("MY_INFO-MED ","Some med  message", UVM_MEDIUM, name());
  UVMC_INFO("MY_INFO-HIGH","Some high message", UVM_HIGH,   name());
  UVMC_INFO("MY_INFO-FULL","Some full message", UVM_FULL,   name());
}
// (end inline source)

 (begin inline source)
int sc_main(int argc, char* argv[]) 
{  
  top t("top");
  sc_start();
  return 0;
}
// (end inline source)
</pre></div>
</div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CMethod>Send a report to UVM for processing, subject to possible filtering by verbosity, action, and active report catchers.</div></div><div class=CToolTip id="tt2"><div class=CClass>Our top-level SC module does the following</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>